<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>1. Installing QUAC &mdash; QUAC documentation for commit 5ccb2ad</title>
    
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="QUAC documentation for commit 5ccb2ad" href="index.html" />
    <link rel="next" title="2. Collecting data" href="collecting.html" />
    <link rel="prev" title="Table of contents" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="collecting.html" title="2. Collecting data"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="index.html" title="Table of contents"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">QUAC documentation for commit 5ccb2ad</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">1. Installing QUAC</a><ul>
<li><a class="reference internal" href="#pypi-and-virtualenv-recommended">1.1. PyPI and virtualenv (recommended)</a></li>
<li><a class="reference internal" href="#self-compile-not-recommended">1.2. Self-compile (not recommended)</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Table of contents</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="collecting.html"
                        title="next chapter">2. Collecting data</a></p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="installing-quac">
<h1>1. Installing QUAC<a class="headerlink" href="#installing-quac" title="Permalink to this headline">¶</a></h1>
<p>QUAC can be installed on most UNIX-based systems, though installation is
easiest on OS X and Debian/Ubuntu. Patches to increase portability are very
welcome.</p>
<div class="section" id="pypi-and-virtualenv-recommended">
<h2>1.1. PyPI and virtualenv (recommended)<a class="headerlink" href="#pypi-and-virtualenv-recommended" title="Permalink to this headline">¶</a></h2>
<p>This method installs QUAC and its Python dependencies inside a virtual
environment with its own Python binary and libraries. This isolates QUAC from
other Python stuff you may have on your system, reducing conflicts.</p>
<p>These instructions assume that virtualenvs are installed under
<cite>~/.virtualenvs</cite> and QUAC will be installed in <cite>~/quac</cite>.</p>
<ol class="arabic">
<li><p class="first">Install prerequisites. The following are required:</p>
<ul class="simple">
<li>Git.</li>
<li>Python 3.4 including development libraries.</li>
<li><cite>virtualenv</cite> and <cite>virtualenvwrapper</cite>.</li>
<li>Libraries needed by Python packages (e.g., GEOS). Installation failures
along the way should guide you here. Known <cite>.deb</cite> packages needed on
Ubuntu Trusty:<ul>
<li><cite>cmdtest</cite></li>
<li><cite>libdgal-dev</cite></li>
<li><cite>python-pip</cite></li>
<li><cite>python-virtualenv</cite></li>
<li><cite>virtualenvwrapper</cite></li>
</ul>
</li>
</ul>
<p>Installation of these things is outside the scope of this guide.</p>
</li>
<li><p class="first">Download QUAC using Git:</p>
<div class="highlight-python"><div class="highlight"><pre>cd
git clone https://github.com/reidpr/quac.git
cd quac
</pre></div>
</div>
</li>
<li><p class="first">Create virtual environment:</p>
<div class="highlight-python"><div class="highlight"><pre>mkvirtualenv --python=/usr/bin/python3 quac
</pre></div>
</div>
</li>
<li><p class="first">Add to virtualenv post-activate hook
(<cite>~/.virtualenvs/quac/bin/postactivate</cite>):</p>
<div class="highlight-python"><div class="highlight"><pre>OLD_PYTHONPATH=&quot;$PYTHONPATH&quot;
export PYTHONPATH=~/quac/lib
OLD_PATH=&quot;$PATH&quot;
export PATH=~/tw/quac/bin:$PATH
</pre></div>
</div>
</li>
<li><p class="first">Add to virtualenv pre-deactivate hook
(<cite>~/.virtualenvs/quac/bin/predeactivate</cite>):</p>
<div class="highlight-python"><div class="highlight"><pre>export PYTHONPATH=&quot;$OLD_PYTHONPATH&quot;
export PATH=&quot;$OLD_PATH&quot;
</pre></div>
</div>
</li>
<li><p class="first">Activate virtual environment:</p>
<div class="highlight-python"><div class="highlight"><pre>workon quac
</pre></div>
</div>
</li>
<li><p class="first">Install GDAL Python bindings (adjust include paths if needed):</p>
<div class="highlight-python"><div class="highlight"><pre>CPLUS_INCLUDE_PATH=/usr/include/gdal C_INCLUDE_PATH=/usr/include/gdal pip install gdal==1.10.0
</pre></div>
</div>
<p>This must be done manually because the bindings have a buggy include path.
Note also that the version must match the system GDAL libraries or the
build will fail in strange ways.</p>
</li>
<li><p class="first">Install remaining Python dependencies:</p>
<div class="highlight-python"><div class="highlight"><pre>pip install -r requirements.txt
</pre></div>
</div>
</li>
<li><p class="first">Build executables and the documentation:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">make</span>
</pre></div>
</div>
</li>
<li><p class="first">Run the tests (this is actually pretty important, as it tells you whether
you&#8217;ve installed all the dependencies correctly):</p>
<div class="highlight-python"><div class="highlight"><pre>./runtests
</pre></div>
</div>
<p>Some tests require additional data or resources; if they are not available,
then the tests are skipped.</p>
<p>(While some parts of QUAC will work if some tests fail, we recommend
installing everything necessary to make them pass, as this will make your
life much easier going forward.)</p>
</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you plan to <a class="reference internal" href="contributing.html"><em>contribute to QUAC</em></a>, you should
do two things differently. First, fork the repository on Github and
clone your own fork instead. Second, the <tt class="docutils literal"><span class="pre">git</span></tt> wrapper <a class="reference external" href="https://github.com/defunkt/hub">hub</a> is recommended.</p>
</div>
</div>
<div class="section" id="self-compile-not-recommended">
<h2>1.2. Self-compile (not recommended)<a class="headerlink" href="#self-compile-not-recommended" title="Permalink to this headline">¶</a></h2>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>This installation method should only be used if the normal way
does not work. It is rarely tested and likely to be broken. In
particular, it has not been updated since before the Python 3
upgrade.</p>
<p class="last">Essentially, it re-implements the most basic functionality of a
package manager, and it does so rather poorly and without regard
to what you already have installed.</p>
</div>
<p>This method does not require root, and it will take a little while to run,
since it has to download and compile a fair amount of stuff. There are
separate scripts to download and install, in case you want to QUAC on a system
that doesn&#8217;t have good access to the Internet.</p>
<p>Prerequisites:</p>
<ul class="simple">
<li>Some basic dependencies such as GNU Make 3.81 and C/C++/Fortran compilers.
Exactly what is currently unknown, but it &#8220;Works For Me™&#8221;.</li>
<li>The <a class="reference external" href="http://modules.sourceforge.net/">Environment Modules</a> package. You
probably have this if your system has a <tt class="docutils literal"><span class="pre">module</span></tt> command. This isn&#8217;t
strictly needed, as you can get the same effect by editing your shell init
files appropriately.</li>
</ul>
<p>The below assumes that you have unpacked QUAC into <tt class="docutils literal"><span class="pre">$QUACBASE</span></tt>.</p>
<p>First, install the dependencies:</p>
<div class="highlight-sh"><div class="highlight"><pre>mkdir <span class="nv">$QUACBASE</span>/deps
<span class="nb">cd</span> <span class="nv">$QUACBASE</span>/deps
../misc/manual-download  <span class="c"># creates $QUACBASE/deps/src</span>
../misc/manual-install
</pre></div>
</div>
<p>Optional:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">manual-install</span></tt> takes an argument which is the number of processes to use
while compiling (<tt class="docutils literal"><span class="pre">make</span> <span class="pre">-j</span></tt>).</li>
<li>You can run <tt class="docutils literal"><span class="pre">manual-download</span></tt> anywhere and move the resulting <tt class="docutils literal"><span class="pre">src</span></tt>
directory into <tt class="docutils literal"><span class="pre">$QUACBASE/deps</span></tt> manually.</li>
</ul>
<p>Second, configure your environment. Add following to your <tt class="docutils literal"><span class="pre">.bashrc</span></tt>.</p>
<div class="highlight-sh"><div class="highlight"><pre>module use --append <span class="nv">$QUACBASE</span>/misc
module load quac-module
</pre></div>
</div>
<p>Note that in addition to making all the dependencies available, this module
adds the QUAC libraries and binaries themselves to your various paths. Be
aware of this if you have multiple QUAC working directories. (For example,
suppose a colleague has installed QUAC and its dependencies in location
<span class="math">\(A\)</span>, and you&#8217;ve loaded <tt class="docutils literal"><span class="pre">quac-module</span></tt> from <span class="math">\(A\)</span> because you don&#8217;t
want to duplicate the tedious installation. You have your own QUAC working
directory at <span class="math">\(B\)</span> so you can hack on it. If you simply type
<tt class="docutils literal"><span class="pre">quacreduce</span></tt>, you will get the one in <span class="math">\(A\)</span> even if you are working in
<span class="math">\(B\)</span>, unless you take measures to prevent this.)</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="collecting.html" title="2. Collecting data"
             >next</a></li>
        <li class="right" >
          <a href="index.html" title="Table of contents"
             >previous</a> |</li>
        <li><a href="index.html">QUAC documentation for commit 5ccb2ad</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012-2013, Los Alamos National Security, LLC and others.
    </div>
  </body>
</html>